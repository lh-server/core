DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20180330021439');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20180330021439');
-- Add your query below.

-- Fix Prospector Remtravel path
DELETE FROM script_waypoint where entry=2917;
INSERT INTO script_waypoint (entry, pointid, location_x, location_y, location_z, waittime, point_comment) VALUES
('2917', '0', '4675.81', '598.615', '17.6457', '0', ''),
('2917', '1', '4672.84', '599.325', '16.4176', '0', ''),
('2917', '2', '4663.45', '607.43', '10.4948', '0', ''),
('2917', '3', '4655.97', '613.761', '8.52327', '0', ''),
('2917', '4', '4640.8', '623.999', '8.37705', '0', ''),
('2917', '5', '4631.68', '630.801', '6.415', '5000', 'SAY_REM_RAMP1_1'),
('2917', '6', '4633.53', '632.476', '6.50983', '0', ''),
('2917', '7', '4639.41', '637.121', '13.3381', '0', ''),
('2917', '8', '4641.19', '638.577', '13.4229', '5000', ''),
('2917', '9', '4641.19', '638.577', '13.4229', '3000', 'SAY_REM_RAMP1_2'),
('2917', '10', '4639.63', '637.234', '13.3398', '0', 'ambush'),
('2917', '11', '4631.68', '630.801', '6.415', '0', ''),
('2917', '12', '4624.71', '631.724', '6.26403', '0', ''),
('2917', '13', '4623.53', '629.719', '6.20134', '5000', 'SAY_REM_BOOK'),
('2917', '14', '4632.03', '641.491', '7.404', '0', ''),
('2917', '15', '4628.08', '646.288', '7.551', '0', ''),
('2917', '16', '4623.37', '649.335', '7.229', '0', ''),
('2917', '17', '4625.96', '643.410', '6.641', '0', ''),
('2917', '18', '4622.62', '637.222', '6.31285', '0', 'SAY_REM_TENT1_1'),
('2917', '19', '4619.76', '637.386', '6.31205', '5000', 'SAY_REM_TENT1_2'),
('2917', '20', '4620.03', '637.368', '6.31205', '0', 'ambush'),
('2917', '21', '4624.15', '637.56', '6.3139', '0', ''),
('2917', '22', '4622.97', '634.016', '6.29498', '0', ''),
('2917', '23', '4616.93', '630.303', '6.23919', '0', ''),
('2917', '24', '4614.55', '616.983', '5.68764', '0', ''),
('2917', '25', '4610.28', '610.029', '5.44254', '0', ''),
('2917', '26', '4601.15', '604.112', '2.05486', '0', ''),
('2917', '27', '4573.92', '582.566', '0.749801', '0', ''),
('2917', '28', '4566.72', '564.078', '1.34308', '0', ''),
('2917', '29', '4599.08', '572.583', '1.20188', '0', ''),
('2917', '30', '4606.51', '565.907', '1.26966', '5000', 'SAY_REM_MOSS + EMOTE_REM_MOSS'),
('2917', '31', '4606.51', '565.907', '1.26966', '1000', 'SAY_REM_MOSS_PROGRESS'),
('2917', '32', '4599.08', '572.583', '1.20188', '0', ''),
('2917', '33', '4566.72', '564.078', '1.34308', '0', ''),
('2917', '34', '4553.62', '572.625', '1.25964', '0', ''),
('2917', '35', '4550.97', '567.231', '1.34551', '0', ''),
('2917', '36', '4549.40', '567.610', '1.33093', '5000', 'SAY_REM_PROGRESS'),
('2917', '37', '4549.65', '567.126', '1.34735', '0', 'ambush'),
('2917', '38', '4553.62', '572.625', '1.25964', '0', ''),
('2917', '39', '4573.92', '582.566', '0.749801', '0', ''),
('2917', '40', '4594.21', '598.533', '1.03406', '0', ''),
('2917', '41', '4601.19', '604.283', '2.06015', '0', ''),
('2917', '42', '4609.54', '610.845', '5.40222', '0', ''),
('2917', '43', '4624.8', '618.076', '5.85154', '0', ''),
('2917', '44', '4632.41', '623.778', '7.28624', '0', ''),
('2917', '45', '4645.92', '621.984', '8.57997', '0', ''),
('2917', '46', '4658.67', '611.093', '8.89175', '0', ''),
('2917', '47', '4671.92', '599.752', '16.0124', '5000', 'SAY_REM_REMEMBER'),
('2917', '48', '4676.98', '600.65', '17.8257', '5000', 'EMOTE_REM_END');

-- Delete a Stone Behemoth's patrol'
DELETE FROM creature_movement where id=37099;
UPDATE creature SET MovementType=1 WHERE guid=37099;

-- Remove an extra Cracked Golem
DELETE FROM creature where guid=37090;

-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
