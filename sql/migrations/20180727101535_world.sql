DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20180727101535');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20180727101535');
-- Add your query below.

UPDATE `creature_template` SET `faction_A`='14', `faction_H`='14' WHERE `entry`='9696'; -- This is wrong, it should be 40, but almost everything in LBRS is supposed to have this faction, use 14 to let this creature assist others and update somewhen later.

SET @GUID := 46654;

DELETE FROM `creature` WHERE `guid` IN ('45813', '45814', '45815', '45816', '45817', '45758', '45759', '45812', '45822', '45821', '45820', '45811', '45819', '45760', '45809', '45761', '45810', '45818', '1172340', '1172301', '1172319');
DELETE FROM `creature_movement` WHERE `id` IN ('45813', '45814', '45815', '45816', '45817', '45758', '45759', '45812', '45822', '45821', '45820', '45811', '45819', '45760', '45809', '45761', '45810', '45818', '1172340', '1172301', '1172319');
DELETE FROM `creature_addon` WHERE `guid` IN ('45813', '45814', '45815', '45816', '45817', '45758', '45759', '45812', '45822', '45821', '45820', '45811', '45819', '45760', '45809', '45761', '45810', '45818', '1172340', '1172301', '1172319');
DELETE FROM `creature_groups` WHERE `memberGUID` IN ('45813', '45814', '45815', '45816', '45817', '45758', '45759', '45812', '45822', '45821', '45820', '45811', '45819', '45760', '45809', '45761', '45810', '45818', '1172340', '1172301', '1172319');

UPDATE `creature` SET `position_x`='-22.6325', `position_y`='-486.186', `position_z`='90.7531', `orientation`='3.14159' WHERE `guid`='45757';

REPLACE INTO `creature` (`guid`, `id`, `map`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecsmin`, `spawntimesecsmax`, `spawndist`, `currentwaypoint`, `curhealth`, `curmana`, `DeathState`, `MovementType`) VALUES
(@GUID + 0, '9692', '229', '0', '0', '-37.5607', '-521.641', '87.7160', '3.45575', '7200', '7200', '0', '0', '8506', '0', '0', '0'),
(@GUID + 1, '9696', '229', '0', '0', '-36.2227', '-523.632', '87.4320', '3.56047', '7200', '7200', '0', '0', '2746', '0', '0', '0'),
(@GUID + 2, '9583', '229', '0', '0', '-53.6383', '-442.827', '78.2854', '4.70957', '7200', '7200', '0', '0', '8722', '0', '0', '2'),
(@GUID + 3, '9693', '229', '0', '0', '-72.4302', '-520.961', '82.3316', '3.40339', '7200', '7200', '0', '0', '7100', '2369', '0', '0'),
(@GUID + 4, '9268', '229', '0', '0', '-77.5619', '-516.932', '81.4632', '4.52040', '7200', '7200', '0', '0', '8720', '0', '0', '0'),
(@GUID + 5, '9696', '229', '0', '0', '-47.1127', '-480.153', '77.9991', '2.82743', '7200', '7200', '0', '0', '2746', '0', '0', '0'),
(@GUID + 6, '9692', '229', '0', '0', '-49.4956', '-482.156', '77.9991', '2.37365', '7200', '7200', '0', '0', '8506', '0', '0', '0'),
(@GUID + 7, '9696', '229', '0', '0', '-51.8879', '-483.818', '77.9991', '1.88496', '7200', '7200', '0', '0', '2746', '0', '0', '0'),
(@GUID + 8, '9693', '229', '0', '0', '-57.4802', '-487.082', '77.9991', '3.22886', '7200', '7200', '0', '0', '7100', '2369', '0', '0'),
(@GUID + 9, '9583', '229', '0', '0', '-58.8099', '-481.005', '77.9991', '4.41568', '7200', '7200', '0', '0', '8722', '0', '0', '0'),
(@GUID + 10, '9268', '229', '0', '0', '-63.3201', '-485.629', '77.9991', '0.85521', '7200', '7200', '0', '0', '8720', '0', '0', '0'),
(@GUID + 11, '9583', '229', '0', '0', '-56.9907', '-427.546', '77.8323', '1.44862', '7200', '7200', '0', '0', '8722', '0', '0', '0'),
(@GUID + 12, '9583', '229', '0', '0', '-43.5588', '-515.171', '88.5866', '3.70166', '7200', '7200', '0', '0', '8722', '0', '0', '0'),
(@GUID + 13, '9268', '229', '0', '0', '-49.6838', '-514.303', '88.3960', '5.44524', '7200', '7200', '0', '0', '8720', '0', '0', '0'),
(@GUID + 14, '9693', '229', '0', '0', '-47.7750', '-520.564', '87.5643', '1.30227', '7200', '7200', '0', '0', '7100', '2369', '0', '0'),
(@GUID + 15, '9696', '229', '0', '0', '-38.1504', '-519.232', '88.0403', '3.36848', '7200', '7200', '0', '0', '2746', '0', '0', '0'),
(@GUID + 16, '9216', '229', '0', '0', '-79.4547', '-523.615', '82.6267', '0.80285', '7200', '7200', '0', '0', '14421', '0', '0', '0'),
(@GUID + 17, '9216', '229', '0', '0', '-49.0348', '-427.765', '77.8322', '1.64061', '7200', '7200', '0', '0', '14421', '0', '0', '0');

DELETE FROM `creature_movement` WHERE `id`=@GUID + 2;
INSERT INTO `creature_movement` (`id`, `point`, `position_x`, `position_y`, `position_z`, `waittime`, `script_id`, `orientation`) VALUES
(@GUID + 2, '1', '-53.7135', '-469.510', '77.8413', '0' , '0', '100'),
(@GUID + 2, '2', '-57.2509', '-477.311', '77.9158', '0' , '0', '100'),
(@GUID + 2, '3', '-61.6685', '-480.695', '77.9158', '0' , '0', '100'),
(@GUID + 2, '4', '-68.0847', '-485.191', '77.9158', '0' , '0', '100'),
(@GUID + 2, '5', '-76.1309', '-488.445', '77.9158', '0' , '0', '100'),
(@GUID + 2, '6', '-78.7550', '-497.510', '77.9866', '0' , '0', '100'),
(@GUID + 2, '7', '-77.5000', '-506.460', '79.4722', '0' , '0', '100'),
(@GUID + 2, '8', '-73.2358', '-515.496', '81.0900', '0' , '0', '100'),
(@GUID + 2, '9', '-65.7134', '-519.569', '82.9049', '0' , '0', '100'),
(@GUID + 2, '10', '-57.8619', '-517.623', '86.6360', '0' , '0', '100'),
(@GUID + 2, '11', '-50.2694', '-512.905', '88.2413', '0' , '0', '100'),
(@GUID + 2, '12', '-47.6077', '-508.537', '88.6223', '0' , '0', '100'),
(@GUID + 2, '13', '-43.8517', '-499.036', '90.1431', '0' , '0', '100'),
(@GUID + 2, '14', '-33.9322', '-488.698', '90.6663', '0' , '0', '100'),
(@GUID + 2, '15', '-43.8517', '-499.036', '90.1431', '0' , '0', '100'),
(@GUID + 2, '16', '-47.6077', '-508.537', '88.6223', '0' , '0', '100'),
(@GUID + 2, '17', '-50.2694', '-512.905', '88.2413', '0' , '0', '100'),
(@GUID + 2, '18', '-57.8619', '-517.623', '86.6360', '0' , '0', '100'),
(@GUID + 2, '19', '-65.7134', '-519.569', '82.9049', '0' , '0', '100'),
(@GUID + 2, '20', '-73.2358', '-515.496', '81.0900', '0' , '0', '100'),
(@GUID + 2, '21', '-77.5000', '-506.460', '79.4722', '0' , '0', '100'),
(@GUID + 2, '22', '-78.7550', '-497.510', '77.9866', '0' , '0', '100'),
(@GUID + 2, '23', '-76.1309', '-488.445', '77.9158', '0' , '0', '100'),
(@GUID + 2, '24', '-68.0847', '-485.191', '77.9158', '0' , '0', '100'),
(@GUID + 2, '25', '-61.6685', '-480.695', '77.9158', '0' , '0', '100'),
(@GUID + 2, '26', '-57.2509', '-477.311', '77.9158', '0' , '0', '100'),
(@GUID + 2, '27', '-53.7135', '-469.510', '77.8413', '0' , '0', '100'),
(@GUID + 2, '28', '-53.3688', '-431.997', '78.2854', '0' , '0', '100');

-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
